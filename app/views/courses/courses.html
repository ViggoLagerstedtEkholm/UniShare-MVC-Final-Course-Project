<div class="container">
  <div class="content-container">
    <div class="fixed">
      <div class="user-profile">
        <!--===edit===-->
        <div class="user-image">
          <img src="images/books.png" alt="USER IMAGE">
        </div>

        <hr />

        <div>
          <h3>
            Course name
          </h3>
        </div>

        <p>
          ---name---
        </p>

        <div>
          <h3>
            Credits
          </h3>
        </div>

        <p>
          ---credits---
        </p>

        <div>
          <h3>
            Duration (YEARS)
          </h3>
        </div>

        <p>
          ---duration---
        </p>

        <div>
          <h3>
            Added
          </h3>
        </div>

        <p>
          ---added---
        </p>

        <div>
          <h3>
            Country
          </h3>
        </div>

        <p>
          ---country---
        </p>

        <div>
          <h3>
            City
          </h3>
        </div>

        <p>
          ---city---
        </p>

        <div>
          <h3>
            University
          </h3>
        </div>

        <p>
          ---university---
        </p>
        <!--===edit===-->
      </div>
    </div>
    <div class="flex-item">
      <div class="user-content">
        <div class="course-container">
          <div class="course-sections-statistics">
            <!--===edit===-->
            <div class="course-info">
              <div class="score">
                Score ( ---score--- )
              </div>
              <p>Total votes: ( ---total_votes--- )</p>
            </div>

            <br />

            <div class="course-info">
              <p>Overall popularity rating: #---popularity-rank--- </p>
              <p>Overall ranking rating: #---ranking-rank--- </p>
            </div>

            <div class="course-info">
              <p>Amount of reviews ( ---reviews--- )</p>
            </div>

            <hr />
            <!--===edit===-->
          </div>

          <!--===edit===-->
          <div class="course-sections">
            <div class="course-info">
              <p>Your rating ---rating--- </p>
            </div>
            <p>Enter a rating</p>
            <form>
              <input type="number" id="courseID" value="---ID---" hidden />
              <select id="rating" name="rating">
                <option value="0">0 (Default)</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
              </select>
            </form>
          </div>
          <!--===edit===-->

          <div class="course-sections">
            <div class="course-info">
              <p>Description</p>
            </div>
            <div class="review-text">
              ---text---
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
  <div class="course-sections">
    <h1>Reviews</h1>
    <br />

    <!--===edit===-->
    <form method="get" action="./review">
      <input name="ID" value="---ID---" hidden />
      <input class="button-style-4" type="submit" value="Type review">
    </form>
     <!--===edit===-->

     <!--===edit===-->
    <div id="---userID---,---courseID---" class="review">
      <div class="comment-image">
        <img src="---userImage---" alt="USER IMG"></img>
      </div>

      <!--===edit===-->
      <input class="button-style-4" value="Edit review" onclick="return updateComment(---userID---, ---courseID---);">
      <hr />
      <input class="button-style-2" value="Delete review" onclick="return deleteComment(---userID---, ---courseID---);">
      <!--===edit===-->

      <br />
      <p>
        Username: ---userDisplayName---
      </p>
      <div class="review-border">
        <div class="review-text">
          ---text---
        </div>
      </div>

      <hr />
      Fulfilling: ---fulfilling---
      <br />
      Environment: ---environment---
      <br />
      Difficulty: ---difficulty---
      <br />
      Grading: ---grading---
      <br />
      Litterature: ---litterature---
      <br />
      Overall: ---overall---
    </div>
    <!--===edit===-->

  </div>
</div>
<script>
  var courseID = document.getElementById('courseID').value;

  function updateComment(reviewID){
    $.ajax({
       url: "./profile/delete/course",
       type: "POST",
       data:{reviewID: reviewID},
       dataType: "json",
       success:function(res){
         console.log(res);
         var canRemove = res["data"]["Status"];
         if(canRemove){
           var ID = res["data"]["ID"];
           document.getElementById("course-" + ID).remove();
         }
       },
       error:function(res){
         console.log(res);
       }
     });
  }

  $.ajax ( {
      url: "./course/getrate",
      type: 'GET',
      data:{ courseID: courseID},
      dataType: "json",
      success: function ( res ){
        console.log(res);
        var rating = res['data']['rating'];
        document.getElementById("rating").value = rating;
      },
      error: function ( res ){
        console.log(res);
      }
  });

  $('select').on('change', function() {
    $.ajax({
       url: "./course/setrate",
       type: "POST",
       data:{courseID: courseID, rating: this.value},
       dataType: "json",
       success:function(data){
         console.log("Updated rating for course: " + findGetParameter("ID"));
       },
       error:function(res){
         console.log(res);
       }
     });
  });
</script>
